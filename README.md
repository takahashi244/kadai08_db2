# ①課題名
高校生・大学生マッチングアプリ レビュー機能（更新・削除機能追加）

## ②課題内容（どんな作品か）
高校生が大学生とのWEB面談後にレビューを投稿・閲覧できるマッチングアプリのレビュー機能をMySQLで実装しました。

### 主な機能
- **レビュー投稿機能**: 4項目（話しやすさ、参考になった度、ワクワク度、時間の正確性）の5段階評価システム
- **レビュー編集機能**: 投稿済みレビューの内容修正（対象大学生は編集不可）
- **レビュー削除機能**: 不要なレビューの削除（確認ダイアログ付き）
- **検索・絞り込み機能**: 大学名、学部、評価、投稿日による高度な検索をSQLクエリで実現
- **レビュー表示機能**: カード型レイアウトによる見やすいレビュー一覧
- **テーブル表示機能**: データベースの詳細データを表形式で表示・管理
- **レスポンシブデザイン**: PC・スマートフォン両対応

### 技術スタック
- **フロントエンド**: HTML5, CSS3, JavaScript
- **バックエンド**: PHP 8.x
- **データベース**: MySQL 8.0
- **環境**: XAMPP（ローカル）、さくらサーバー（本番）

## ③DEMO
- **ローカル環境**: http://localhost/gs_kadai/kadai08_db2/
- **本番環境**: https://gs-takahashi244.sakura.ne.jp/kadai08_db2/

## ④工夫した点・こだわった点

### セキュリティ対策
- **SQLインジェクション対策**: プリペアドステートメントによる安全なクエリ実行
- **XSS対策**: `htmlspecialchars()`による出力エスケープ処理
- **秘匿情報管理**: 本番環境の設定ファイル分離と`.gitignore`による適切な管理

### データベース設計
- **正規化**: データの整合性を保つテーブル設計
- **外部キー制約**: リレーショナルデータベースの利点を活用
- **パフォーマンス最適化**: JOINクエリによる効率的なデータ取得

### ユーザビリティ
- **動的検索機能**: 複数条件での柔軟な検索をWHERE句の動的生成で実現
- **視覚的評価表示**: 星評価とカード型レイアウトによる直感的なUI
- **Sticky Form**: フォーム入力値の保持機能でユーザー体験を向上
- **レビュー管理機能**: 編集・削除ボタンによる簡単な操作性
- **セキュリティ設計**: 編集時の対象大学生変更を禁止し、データ整合性を保護

### 環境対応
- **自動環境切り替え**: ローカル（XAMPP）と本番（さくら）の自動判定
- **設定ファイル分離**: `env.php`と`env.example.php`による環境別設定管理

## ⑤苦戦した点・次回トライしたいこと

### 苦戦した点
- **複雑なSQLクエリの構築**: 複数の検索条件を組み合わせた動的WHEREクエリの実装
- **環境依存の設定管理**: ローカルと本番環境の設定分離とセキュリティ強化
- **データベース設計**: 正規化とパフォーマンスのバランス調整

### 次回トライしたい機能
- **ユーザー認証システム**: セッション管理とパスワードハッシュ化
- **画像アップロード機能**: プロフィール写真の投稿・表示
- **いいね機能**: レビューへの評価とソート機能
- **管理者ダッシュボード**: データ分析とユーザー管理機能
- **API化**: REST APIによるフロントエンド分離

## ⑥コメント（感想、シェアしたいこと等）

### 学んだこと
素のPHPでの開発により、フレームワークの便利さを再認識すると同時に、基礎技術の重要性を深く理解できました。MySQLとの連携では、SQLクエリの書き方ひとつでパフォーマンスが大きく変わることを実感し、データベース設計の奥深さを学びました。

### セキュリティへの理解
本番環境デプロイとセキュリティ対策の実装では、実際の運用を想定した設計の重要性を学習できました。特に秘匿情報の管理とGitHubでの安全な運用は、今後のプロジェクトでも活用したい知識です。

### 参考資料
- [PHP公式ドキュメント - PDO](https://www.php.net/manual/ja/book.pdo.php)
- [MySQL公式リファレンス](https://dev.mysql.com/doc/refman/8.0/ja/)
- [PHP Security Guide](https://www.php.net/manual/ja/security.php)
- [IPA Webアプリケーションセキュリティ](https://www.ipa.go.jp/security/vuln/websecurity.html)

---

## 📁 ファイル構成

```
kadai08_db2/
├── index.php                    # メインページ（レビュー表示・検索）
├── post_review.php             # レビュー投稿ページ
├── edit_review.php             # レビュー編集ページ（NEW）
├── update_review.php           # レビュー更新処理（NEW）
├── delete_review.php           # レビュー削除処理（NEW）
├── view_reviews_table.php      # テーブル表示ページ
├── db_test.php                 # データベース接続テスト
├── config/
│   ├── database.php            # データベース接続設定
│   ├── env.php                 # 本番環境設定（.gitignore対象）
│   └── env.example.php         # 環境設定テンプレート
├── css/
│   └── style.css               # スタイルシート（編集・削除用追加）
├── database/
│   ├── create_database.sql     # データベース作成SQL
│   └── insert_dummy_data.sql   # サンプルデータ投入SQL
├── sql_commands/
│   └── view_reviews_queries.sql # SQLクエリサンプル
└── README_DATABASE.md          # データベース設計書
```

## 🚀 セットアップ手順

### ローカル環境（XAMPP）
1. XAMPPをインストール・起動
2. プロジェクトを`htdocs/gs_kadai/kadai08_db2/`に配置
3. MySQLでデータベースを作成: `CREATE DATABASE university_matching;`
4. `database/create_database.sql`を実行してテーブル作成
5. `database/insert_dummy_data.sql`を実行してサンプルデータ投入
6. http://localhost/gs_kadai/kadai08_db2/ にアクセス

### 本番環境（さくらサーバー）
1. ファイルをサーバーにアップロード
2. `config/env.php`を手動で作成・配置
3. データベースとテーブルの作成
4. 動作確認

詳細な手順は`README_DATABASE.md`を参照してください。
